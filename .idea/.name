APO_finalv1.py